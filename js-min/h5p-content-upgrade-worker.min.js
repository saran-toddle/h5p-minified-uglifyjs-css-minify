var libraryLoadedCallback,H5P=H5P||{};importScripts("h5p-version.js","h5p-content-upgrade-process.js");var messageHandlers={newJob:function(a){new H5P.ContentUpgradeProcess(a.name,new H5P.Version(a.oldVersion),new H5P.Version(a.newVersion),a.params,a.id,(function(a,e,r){postMessage({action:"loadLibrary",name:a,version:e.toString()}),libraryLoadedCallback=r}),(function(e,r){e?postMessage({action:"error",id:a.id,err:e.message?e.message:e}):postMessage({action:"done",id:a.id,params:r})}))},libraryLoaded:function(a){var e=a.library;if(e.upgradesScript)try{importScripts(e.upgradesScript)}catch(a){return void libraryLoadedCallback(a)}libraryLoadedCallback(null,a.library)}};onmessage=function(a){void 0!==a.data.action&&messageHandlers[a.data.action]&&messageHandlers[a.data.action].call(this,a.data)};